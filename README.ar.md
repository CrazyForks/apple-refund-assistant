
## ูุณุงุนุฏ ุงุณุชุฑุฏุงุฏ ุฃููุงู Apple

[English](./README.md) | [็ฎไฝไธญๆ](./README.zh.md) | [Espaรฑol](./README.es.md) | [เคนเคฟเคจเฅเคฆเฅ](./README.hi.md) | ุงูุนุฑุจูุฉ | [Portuguรชs](./README.pt.md) | [ะัััะบะธะน](./README.ru.md) | [ๆฅๆฌ่ช](./README.ja.md) | [Franรงais](./README.fr.md)

ุฎุฏูุฉ ููุน ุงุณุชุฑุฏุงุฏ ุงููุฏููุนุงุช ูุชุนุฏุฏุฉ ุงููุณุชุฃุฌุฑูู ุจูุงุกู ุนูู Laravel.

![GitHub Actions Workflow Status](https://img.shields.io/github/actions/workflow/status/seth-shi/apple-refund-assistant/laravel.yml)
![Codecov](https://img.shields.io/codecov/c/github/seth-shi/apple-refund-assistant)
![CodeRabbit Pull Request Reviews](https://img.shields.io/coderabbit/prs/github/seth-shi/apple-refund-assistant?utm_source=oss&utm_medium=github&utm_campaign=seth-shi%2Fapple-refund-assistant&labelColor=171717&color=FF570A&link=https%3A%2F%2Fcoderabbit.ai&label=CodeRabbit+Reviews)

## ุนุฑุถ ูุจุงุดุฑ

๐ **ูููุน ุงูุนุฑุถ ุงูุชูุถูุญู**: [https://apple-refund-assistant.shiguopeng.cn/](https://apple-refund-assistant.shiguopeng.cn/)

> โ๏ธ **ููุงุญุธุฉ**: ุณูุชู ุฅุนุงุฏุฉ ุชุนููู ุงููุธุงู ูู 30 ุฏูููุฉ.

## ูุธุฑุฉ ุนุงูุฉ

ูุนุงูุฌุฉ ุฅุดุนุงุฑุงุช CONSUMPTION_REQUEST ูู Apple ูู ุงูููุช ุงููุนูู ูุฅุฑุณุงู ูุนูููุงุช ุงูุงุณุชููุงู ููุฑุงู ุฅูู Appleุ ููุง ูุณุงุนุฏ ูู ุชูููู ุนูููุงุช ุงูุงุณุชุฑุฏุงุฏ ุงูุงุญุชูุงููุฉ.


- **ุฏุนู ูุชุนุฏุฏ ุงูุนููุงุช**
- **ุฏุนู ูุชุนุฏุฏ ุงููุณุชุฃุฌุฑูู**
- **ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช (ไธญๆ / English / Espaรฑol / เคนเคฟเคจเฅเคฆเฅ / ุงูุนุฑุจูุฉ / Portuguรชs / ะัััะบะธะน / ๆฅๆฌ่ช / Franรงais)**
- **ุจุฏูู ุชุจุนูุงุช - ุงุจุฏุฃ ุงูุฎุฏูุฉ ุงููุญููุฉ ูุจุงุดุฑุฉ ููุดุฑ ุฃุณุฑุน**

| ุงูุชุจุนูุฉ | ุจุฏูู ุชุจุนูุงุช |  ูุชูุฏู   |
|-----|--|-----|
|  ูุงุนุฏุฉ ุงูุจูุงูุงุช   | sqlite | MySQL |
|  ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช   | file | redis  |
|   ุงูุฌูุณุฉ | file |  redis   |
- ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช **Webhook** ูุน ุชุบุทูุฉ ุงุฎุชุจุงุฑ **100%**
- **ููุงุชูุญ ุฐุงุชูุฉ ุงูุฅุฏุงุฑุฉ** - ูุชู ุชุฎุฒูู ุงูููุงุชูุญ ุงูุฎุงุตุฉ ููุท ูู ุฌุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุช `apps` (ูุน ุงูุชุดููุฑ ุงููุชูุงุซูุ ุงูููุงุชูุญ ุงููููุฏุฉ ุจูุงุณุทุฉ ุชุทุจููู)
- **12 ุญูู ุงุณุชููุงู** - ุงุญุณุจ ุฌููุน ุญููู Apple ุงููุทููุจุฉ
- ุฏุนู ุฅุนุงุฏุฉ ุชูุฌูู ุฑุณุงุฆู ุงูุฎุงุฏู
  - ูุฑุณู ุฎุงุฏู Apple ุฅูู ุงูุฎุฏูุฉ ุงูุญุงููุฉุ ูุงูุชู ุชุนูุฏ ุงูุชูุฌูู ุฅูู ุฎุงุฏู ุงูุฅูุชุงุฌ ุงูุฎุงุต ุจู

 
## ููุทุงุช ุงูุดุงุดุฉ
![ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ](assets/0.png)
![ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ](assets/1.png)
![ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ](assets/2.png)
![ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ](assets/3.png)
![ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ](assets/4.png)
![ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ](assets/5.png)


## ุงูุจุฏุก ุงูุณุฑูุน
### ุงุณุชุฎุฏุงู ุตูุฑุฉ ูุณุจูุฉ ุงูุจูุงุก
```bash
docker run -d \
  -p 8080:8080 \
  --name apple-refund-assistant \
  --restart=always \
  ghcr.io/seth-shi/apple-refund-assistant:latest
```


### ุงูุจูุงุก ูุงูุชุดุบูู ูุญููุงู
```bash
git clone https://github.com/seth-shi/apple-refund-assistant
cd apple-refund-assistant
## ุจูุงุก ุงูุตูุฑุฉ ูุงููุดุฑ
./deploy.sh
```

### ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชุซุจูุช ุงูุจูุงูุงุช
```
touch database.sqlite
docker run -d \
  -p 8080:8080 \
  -v $(pwd)/database.sqlite:/var/www/html/database/database.sqlite \
  --name apple-refund-assistant \
  --restart=always \
  ghcr.io/seth-shi/apple-refund-assistant:latest
```

## ุงุณุชุฑุงุชูุฌูุฉ ุญููู ุงูุงุณุชููุงู
* ุงูุชูุซูู: [https://developer.apple.com/documentation/appstoreserverapi/consumptionrequest](https://developer.apple.com/documentation/appstoreserverapi/consumptionrequest)
* ููุฏ ุงูุงุณุชุฑุงุชูุฌูุฉ: [ConsumptionService.php](./app/Services/ConsumptionService.php) 
* ูููู ุชุญุฏูุซ ุญููู ุฌุฏูู `users` ุจูุงุณุทุฉ ุฃูุธูุฉ ุฃุฎุฑู

| ุงูุญูู                       | ุงููุตู                | ูุตุฏุฑ ุงูุจูุงูุงุช                          | ูุงุนุฏุฉ ุงูุญุณุงุจ                                                                                           |
|--------------------------|-------------------|--------------------------------|------------------------------------------------------------------------------------------------|
| accountTenure            | ุนุฏุฏ ุงูุฃูุงู ููุฐ ุชุณุฌูู ุงููุณุชุฎุฏู            | `users.register_at`            | ุงูููุช ุงูุญุงูู ูุงูุต ููุช ุงูุชุณุฌูู                                                                                     |
| appAccountToken          | ุฑูุฒ ุงูุญุณุงุจ          | `users.app_account_token`      | [ูุฌุจ ุชูุฑูุฑู ุนูุฏูุง ููุดุฆ ุงูุนููู ุงูุทูุจ](https://developer.apple.com/documentation/StoreKit/Transaction/appAccountToken) |
| consumptionStatus        | ุญุงูุฉ ุงูุงุณุชููุงู              | `transactions.expiration_date` | ููุงุฑูุฉ ุจุงูููุช ุงูุญุงููุ ุฅุฑุฌุงุน ูุณุชููู ุฅุฐุง ุงูุชูุช ุงูุตูุงุญูุฉ                                                                              |
| customerConsented        | ูุงูู ุงููุณุชุฎุฏู ุนูู ุชูุฏูู ุงูุจูุงูุงุช          | N/A                              | ูููุฉ ุซุงุจุชุฉ `true`                                                                                       |
| deliveryStatus           | ูุง ุฅุฐุง ุชู ุชุณููู ุนูููุฉ ุดุฑุงุก ุฏุงุฎู ุงูุชุทุจูู ุจูุฌุงุญ | N/A                              | ูููุฉ ุซุงุจุชุฉ `0` (ุชุณููู ุนุงุฏู)                                                                                    |
| lifetimeDollarsPurchased | ุฅุฌูุงูู ูุจูุบ ุงูุดุฑุงุก ุฏุงุฎู ุงูุชุทุจูู             | `users.purchased_dollars`      | ูุชุฑุงูู ุจูุงุกู ุนูู ุฃุญุฏุงุซ ูุนุงููุงุช Appleุ ุฃู ููููู ุงูุชุฑุงูู ูุฏููุงู                                                                        |
| lifetimeDollarsRefunded  | ุฅุฌูุงูู ูุจูุบ ุงูุงุณุชุฑุฏุงุฏ             | `users.refunded_dollars`       | ูุชุฑุงูู ุจูุงุกู ุนูู ุฃุญุฏุงุซ ุงุณุชุฑุฏุงุฏ Appleุ ุฃู ููููู ุงูุชุฑุงูู ูุฏููุงู                                                                        |
| platform                 | ุงูููุตุฉ                | N/A                              | ูููุฉ ุซุงุจุชุฉ `1` (apple)                                                                                   |
| playTime                 | ูููุฉ ููุช ุงุณุชุฎุฏุงู ุงูุชุทุจูู ููุนููู        | `users.play_seconds`           | ูุญุชุงุฌ ูุธุงูู ุฅูู ุฏุนู ุชุญุฏูุซ ูุฐุง ุงูุญููุ ูุฅูุง ููู `0`                                                                          |
| refundPreference         | ุงููุชูุฌุฉ ุงููุชููุนุฉ ูุทูุจ ุงูุงุณุชุฑุฏุงุฏ         | `transactions.expiration_date` | ููุงุฑูุฉ ุจุงูููุช ุงูุญุงููุ ููุถู ุฑูุถ ุงูุงุณุชุฑุฏุงุฏ ุฅุฐุง ุงูุชูุช ุงูุตูุงุญูุฉ                                                                             |
| sampleContentProvided    | ูุง ุฅุฐุง ุชู ุชูููุฑ ุชุฌุฑุจุฉ            | `apps.sample_content_provided` | ุงูุชูููู ุนูุฏ ุฅูุดุงุก ุงูุชุทุจูู                                                                                      |
| userStatus               | ุญุงูุฉ ุงููุณุชุฎุฏู              | N/A                              | ูููุฉ ุซุงุจุชุฉ `1` (ูุณุชุฎุฏู ุนุงุฏู)                                                                                   |



## ุงูุชุฑุฎูุต

ูุฑุฎุต ุจููุฌุจ Apache License 2.0ุ ุฑุงุฌุน [LICENSE](./LICENSE) ููุชูุงุตูู.

## ุงูุฏุนู

ููุฃุณุฆูุฉ ุฃู ุงููุฎุงููุ ูุฑุฌู ุชูุฏูู ูุดููุฉ ุนูู GitHub.

## ุงูุฎุทุท ุงููุณุชูุจููุฉ
- ูู ูุฏูู ุฃููุงุฑ ุฃุฎุฑู ุฃู ููุชู ุจุงูุชุนุงููุ ูุฑุฌู ุชูุฏูู ูุดููุฉ ุนูู GitHub - ูุชุทูุน ุฅูู ููุงุญุธุงุชู!

## ุดูุฑ ูุชูุฏูุฑ
* [Rates By Exchange Rate API](https://www.exchangerate-api.com)

