# ===============================================
# SonarCloud Configuration for Laravel Project (Final with Public Exclusion)
# ===============================================

# 1. Project and Authentication
# -----------------------------------------------
sonar.projectKey=seth-shi_apple-refund-assistant
sonar.organization=seth-shi
# Resolve encoding warning
sonar.sourceEncoding=UTF-8

# 2. Source and Test Scope
# -----------------------------------------------
# Source code: Only includes PHP business logic, configuration, and route files that need analysis
sonar.sources=app,config,database,routes

# Test code: Matches PHPUnit's <testsuites> paths
sonar.tests=tests

# 3. Excluded Files and Directories (All exclusions combined)
# -----------------------------------------------
# Exclude all files/directories not needing analysis to ensure accurate coverage calculation
sonar.exclusions= \
    # Core exclusions: Prevent dilution of code lines
    vendor/**, \
    node_modules/**, \
    storage/**, \
    bootstrap/**, \
    resources/**, \
    config/**, \
    database/**, \
    routes/**, \
    \
    # [New] Exclude all files in public directory
    public/**, \
    \
    # Exact exclusions matching PHPUnit <source><exclude>
    app/Console/**, \
    app/Providers/**, \
    app/Enums/**, \
    app/Filament/**, \
    app/Models/**, \
    app/Policies/**, \
    app/Http/Controllers/WelcomeController.php

# 5. Report Paths
# Ensure correct import of coverage and test execution results
sonar.php.coverage.reportPaths=coverage.xml