
## Apple Refund Assistant

[English](./README.md) | [ÁÆÄ‰Ωì‰∏≠Êñá](./README.zh.md) | [Espa√±ol](./README.es.md) | [‡§π‡§ø‡§®‡•ç‡§¶‡•Ä](./README.hi.md) | [ÿßŸÑÿπÿ±ÿ®Ÿäÿ©](./README.ar.md) | [Portugu√™s](./README.pt.md) | –†—É—Å—Å–∫–∏–π | [Êó•Êú¨Ë™û](./README.ja.md) | [Fran√ßais](./README.fr.md)

–ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ Laravel.

![GitHub Actions Workflow Status](https://img.shields.io/github/actions/workflow/status/seth-shi/apple-refund-assistant/laravel.yml)
![Codecov](https://img.shields.io/codecov/c/github/seth-shi/apple-refund-assistant)
![CodeRabbit Pull Request Reviews](https://img.shields.io/coderabbit/prs/github/seth-shi/apple-refund-assistant?utm_source=oss&utm_medium=github&utm_campaign=seth-shi%2Fapple-refund-assistant&labelColor=171717&color=FF570A&link=https%3A%2F%2Fcoderabbit.ai&label=CodeRabbit+Reviews)

## –ñ–∏–≤–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

üåê **–î–µ–º–æ-—Å–∞–π—Ç**: [https://apple-refund-assistant.shiguopeng.cn/](https://apple-refund-assistant.shiguopeng.cn/)

> ‚ö†Ô∏è **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç.

## –û–±–∑–æ—Ä

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è CONSUMPTION_REQUEST –æ—Ç Apple –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ Apple, –ø–æ–º–æ–≥–∞—è —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –º–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã.


- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞–ª—é—Ç**
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤**
- **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (‰∏≠Êñá / English / Espa√±ol / ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä / ÿßŸÑÿπÿ±ÿ®Ÿäÿ© / Portugu√™s / –†—É—Å—Å–∫–∏–π / Êó•Êú¨Ë™û / Fran√ßais)**
- **–ë–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π - –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**

| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å | –ë–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π |  –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π   |
|-----|--|-----|
|  –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö   | sqlite | MySQL |
|  –ö—ç—à   | file | redis  |
|   –°–µ—Å—Å–∏—è | file |  redis   |
- API **Webhook** —Å–æ **100%** –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ç–µ—Å—Ç–∞–º–∏
- **–°–∞–º–æ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –∫–ª—é—á–∏** - –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `apps` (—Å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º, –∫–ª—é—á–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º)
- **12 –ø–æ–ª–µ–π –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è** - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è Apple
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä–∞
  - –°–µ—Ä–≤–µ—Ä Apple –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–º—É —Å–µ—Ä–≤–∏—Å—É, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –Ω–∞ –≤–∞—à –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä

 
## –°–∫—Ä–∏–Ω—à–æ—Ç—ã
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/0.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/1.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/2.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/3.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/4.png)


## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞
```bash
docker run -d \
  -p 8080:8080 \
  --name apple-refund-assistant \
  --restart=always \
  ghcr.io/seth-shi/apple-refund-assistant:latest
```


### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
```bash
git clone https://github.com/seth-shi/apple-refund-assistant
cd apple-refund-assistant
## –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å
./deploy.sh
```

### –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
```
touch database.sqlite
docker run -d \
  -p 8080:8080 \
  -v $(pwd)/database.sqlite:/var/www/html/database/database.sqlite \
  --name apple-refund-assistant \
  --restart=always \
  ghcr.io/seth-shi/apple-refund-assistant:latest
```

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–ª–µ–π –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [https://developer.apple.com/documentation/appstoreserverapi/consumptionrequest](https://developer.apple.com/documentation/appstoreserverapi/consumptionrequest)
* –ö–æ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: [ConsumptionService.php](./app/Services/ConsumptionService.php) 
* –ü–æ–ª—è —Ç–∞–±–ª–∏—Ü—ã `users` –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

| –ü–æ–ª–µ                       | –û–ø–∏—Å–∞–Ω–∏–µ                | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö                          | –ü—Ä–∞–≤–∏–ª–æ —Ä–∞—Å—á–µ—Ç–∞                                                                                           |
|--------------------------|-------------------|--------------------------------|------------------------------------------------------------------------------------------------|
| accountTenure            | –î–Ω–µ–π —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è            | `users.register_at`            | –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –º–∏–Ω—É—Å –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏                                                                                     |
| appAccountToken          | –¢–æ–∫–µ–Ω —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏          | `users.app_account_token`      | [–î–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–æ–º](https://developer.apple.com/documentation/StoreKit/Transaction/appAccountToken) |
| consumptionStatus        | –°—Ç–∞—Ç—É—Å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è              | `transactions.expiration_date` | –°—Ä–∞–≤–Ω–∏—Ç—å —Å —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º, –≤–µ—Ä–Ω—É—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–æ, –µ—Å–ª–∏ –∏—Å—Ç–µ–∫                                                                              |
| customerConsented        | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∞–ª —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö          | N/A                              | –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ `true`                                                                                       |
| deliveryStatus           | –ë—ã–ª–∞ –ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —É—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ | N/A                              | –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ `0` (–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞)                                                                                    |
| lifetimeDollarsPurchased | –û–±—â–∞—è —Å—É–º–º–∞ –ø–æ–∫—É–ø–æ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏             | `users.purchased_dollars`      | –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π Apple, –∏–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é                                                                        |
| lifetimeDollarsRefunded  | –û–±—â–∞—è —Å—É–º–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤             | `users.refunded_dollars`       | –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π –≤–æ–∑–≤—Ä–∞—Ç–∞ Apple, –∏–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é                                                                        |
| platform                 | –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞                | N/A                              | –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ `1` (apple)                                                                                   |
| playTime                 | –ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–º        | `users.play_seconds`           | –í–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–æ–ª—è, –∏–Ω–∞—á–µ —ç—Ç–æ `0`                                                                          |
| refundPreference         | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞         | `transactions.expiration_date` | –°—Ä–∞–≤–Ω–∏—Ç—å —Å —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º, –ø—Ä–µ–¥–ø–æ—á–µ—Å—Ç—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç, –µ—Å–ª–∏ –∏—Å—Ç–µ–∫                                                                             |
| sampleContentProvided    | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø—Ä–æ–±–Ω–∞—è –≤–µ—Ä—Å–∏—è            | `apps.sample_content_provided` | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                                                                                      |
| userStatus               | –°—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è              | N/A                              | –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ `1` (–æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)                                                                                   |



## –õ–∏—Ü–µ–Ω–∑–∏—è

–õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–æ –ø–æ Apache License 2.0, —Å–º. [LICENSE](./LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞–º, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub.

## –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ
- –ï—Å—Ç—å –¥—Ä—É–≥–∏–µ –∏–¥–µ–∏ –∏–ª–∏ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–µ? –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub - –º—ã –∂–¥–µ–º –≤–∞—à–∏—Ö –æ—Ç–∑—ã–≤–æ–≤!

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
* [Rates By Exchange Rate API](https://www.exchangerate-api.com)

