## apple-refund-assistant
![GitHub Actions Workflow Status](https://img.shields.io/github/actions/workflow/status/seth-shi/apple-refund-assistant/laravel.yml)
![Codecov](https://img.shields.io/codecov/c/github/seth-shi/apple-refund-assistant)
![CodeRabbit Pull Request Reviews](https://img.shields.io/coderabbit/prs/github/seth-shi/apple-refund-assistant?utm_source=oss&utm_medium=github&utm_campaign=seth-shi%2Fapple-refund-assistant&labelColor=171717&color=FF570A&link=https%3A%2F%2Fcoderabbit.ai&label=CodeRabbit+Reviews)

[English](./README.md) | [ÁÆÄ‰Ωì‰∏≠Êñá](./README.zh.md) | [Espa√±ol](./README.es.md) | [‡§π‡§ø‡§®‡•ç‡§¶‡•Ä](./README.hi.md) | [ÿßŸÑÿπÿ±ÿ®Ÿäÿ©](./README.ar.md) | [Portugu√™s](./README.pt.md) | –†—É—Å—Å–∫–∏–π | [Êó•Êú¨Ë™û](./README.ja.md) | [Fran√ßais](./README.fr.md)

–≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Laravel / Filament multi-tenant,
—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–æ–º–æ–≥–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –º–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã, –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è CONSUMPTION_REQUEST –æ—Ç Apple –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—è –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏.

- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Multi-tenant**
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Multi-—è–∑—ã–∫–æ–≤** (‰∏≠Êñá / English / Espa√±ol / ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä / ÿßŸÑÿπÿ±ÿ®Ÿäÿ© / Portugu√™s / –†—É—Å—Å–∫–∏–π / Êó•Êú¨Ë™û / Fran√ßais)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Multi-–≤–∞–ª—é—Ç**
- **–ù—É–ª–µ–≤—ã–µ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ File+SQLite** `–∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ Redis+MySQL`
- **100% –ü–æ–∫—Ä—ã—Ç–∏–µ –¢–µ—Å—Ç–∞–º–∏**
- **–°–∞–º–æ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –ö–ª—é—á–∏ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è** –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `apps` (—Å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º, –∫–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º)
- **12 –ü–æ–ª—è –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è** - [–í—ã—á–∏—Å–ª–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è Apple](#—Å—Ç—Ä–∞—Ç–µ–≥–∏—è-–ø–æ–ª–µ–π-–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è)
- **–ü–µ—Ä–µ—Å—ã–ª–∫–∞ –°–æ–æ–±—â–µ–Ω–∏–π –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** –°–µ—Ä–≤–µ—Ä Apple –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–∏—Å, —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –Ω–∞ –≤–∞—à –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä


## –û–Ω–ª–∞–π–Ω –î–µ–º–æ

üåê **URL –î–µ–º–æ**: [https://apple-refund-assistant.shiguopeng.cn/](https://apple-refund-assistant.shiguopeng.cn/)

> ‚ö†Ô∏è **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç.

 
## –°–∫—Ä–∏–Ω—à–æ—Ç—ã
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/0.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/1.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/2.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/3.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/4.png)
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](assets/5.png)


## –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç
### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –°–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –û–±—Ä–∞–∑—Ü–∞
```bash
docker run -d \
  -p 8080:8080 \
  --name apple-refund-assistant \
  --restart=always \
  ghcr.io/seth-shi/apple-refund-assistant:latest
```


### –õ–æ–∫–∞–ª—å–Ω–∞—è –°–±–æ—Ä–∫–∞ –∏ –ó–∞–ø—É—Å–∫
```bash
git clone https://github.com/seth-shi/apple-refund-assistant
cd apple-refund-assistant
## –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å
./deploy.sh
```

### –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
```
touch database.sqlite
docker run -d \
  -p 8080:8080 \
  -v $(pwd)/database.sqlite:/var/www/html/database/database.sqlite \
  --name apple-refund-assistant \
  --restart=always \
  ghcr.io/seth-shi/apple-refund-assistant:latest
```

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ü–æ–ª–µ–π –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [https://developer.apple.com/documentation/appstoreserverapi/consumptionrequest](https://developer.apple.com/documentation/appstoreserverapi/consumptionrequest)
* –ö–æ–¥ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏: [ConsumptionService.php](./app/Services/ConsumptionService.php) 
* –ü–æ–ª—è —Ç–∞–±–ª–∏—Ü—ã `users` –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

| –ü–æ–ª–µ                       | –û–ø–∏—Å–∞–Ω–∏–µ                | –ò—Å—Ç–æ—á–Ω–∏–∫ –î–∞–Ω–Ω—ã—Ö                          | –ü—Ä–∞–≤–∏–ª–æ –í—ã—á–∏—Å–ª–µ–Ω–∏—è                                                                                           |
|--------------------------|-------------------|--------------------------------|------------------------------------------------------------------------------------------------|
| accountTenure            | –î–Ω–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è            | `users.register_at`            | –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –º–∏–Ω—É—Å –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏                                                                                     |
| appAccountToken          | –¢–æ–∫–µ–Ω –∞–∫–∫–∞—É–Ω—Ç–∞          | `users.app_account_token`      | [–ù—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–º –∑–∞–∫–∞–∑–∞](https://developer.apple.com/documentation/StoreKit/Transaction/appAccountToken) |
| consumptionStatus        | –°—Ç–∞—Ç—É—Å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è              | `transactions.expiration_date` | –°—Ä–∞–≤–Ω–∏—Ç—å —Å —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º, –µ—Å–ª–∏ –∏—Å—Ç–µ–∫ —Å—Ä–æ–∫ –≤–µ—Ä–Ω—É—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–æ                                                                              |
| customerConsented        | –°–æ–≥–ª–∞—Å–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ          | –ù–µ—Ç                              | –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ `true`                                                                                       |
| deliveryStatus           | –£—Å–ø–µ—à–Ω–æ –ª–∏ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞. | –ù–µ—Ç                              | –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ `0`(–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞)                                                                                    |
| lifetimeDollarsPurchased | –û–±—â–∞—è —Å—É–º–º–∞ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã—Ö –ø–æ–∫—É–ø–æ–∫             | `users.purchased_dollars`      | –ù–∞–∫–æ–ø–∏—Ç—å —ç—Ç–æ –ø–æ–ª–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π Apple, –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å —Å–∞–º–∏                                                                        |
| lifetimeDollarsRefunded  | –û–±—â–∞—è —Å—É–º–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤             | `users.refunded_dollars`       | –ù–∞–∫–æ–ø–∏—Ç—å —ç—Ç–æ –ø–æ–ª–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ Apple, –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å —Å–∞–º–∏                                                                        |
| platform                 | –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞                | –ù–µ—Ç                              | –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ `1`(apple)                                                                                   |
| playTime                 | –ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–º        | `users.play_seconds`           | –í–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–æ–ª—è, –∏–Ω–∞—á–µ —ç—Ç–æ `0`                                                                          |
| refundPreference         | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞         | `transactions.expiration_date` | –°—Ä–∞–≤–Ω–∏—Ç—å —Å —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º, –µ—Å–ª–∏ –∏—Å—Ç–µ–∫ —Å—Ä–æ–∫ –Ω–∞–¥–µ—è—Ç—å—Å—è –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç                                                                             |
| sampleContentProvided    | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø—Ä–æ–±–Ω–∞—è –≤–µ—Ä—Å–∏—è            | `apps.sample_content_provided` | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                                                                                      |
| userStatus               | –°—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è              | –ù–µ—Ç                              | –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ `1`(–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)                                                                                   |

## –ü–ª–∞–Ω—ã –Ω–∞ –ë—É–¥—É—â–µ–µ
- –ï—Å—Ç—å –¥—Ä—É–≥–∏–µ –∏–¥–µ–∏ –∏–ª–∏ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–µ? –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ issue –Ω–∞ GitHub - –º—ã –∂–¥–µ–º –≤–∞—à–∏—Ö –æ—Ç–∑—ã–≤–æ–≤!

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
* [Rates By Exchange Rate API](https://www.exchangerate-api.com)
* [https://github.com/argus-sight/refund-swatter-lite](https://github.com/argus-sight/refund-swatter-lite)